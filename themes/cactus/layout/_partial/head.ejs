<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <%- open_graph({
        image:          thumbnail(page),
        fb_app_id:      theme.open_graph.fb_app_id,
        fb_admins:      theme.open_graph.fb_admins,
        twitter_id:     theme.open_graph.twitter_id,
        google_plus:    theme.open_graph.google_plus,
    }) %>
    <%- meta(page) %>
    <% if (theme.favicon) { %>
        <% if (theme.favicon.desktop) { %>
<<<<<<< Updated upstream
          <% if (theme.gravatar.email && theme.favicon.desktop.gravatar) { %>
=======
          <% if (theme.gravatar && theme.gravatar.email && theme.favicon.desktop.gravatar) { %>
>>>>>>> Stashed changes
              <link rel="shortcut icon" href="<%= gravatar(theme.gravatar.email, 16) %>">
          <% } else { %>
              <link rel="shortcut icon" href="<%= url_for(theme.favicon.desktop.url) %>">
          <% } %>
        <% } %>
        <% if (theme.favicon.android) { %>
<<<<<<< Updated upstream
          <% if (theme.gravatar.email && theme.favicon.android.gravatar) { %>
=======
          <% if (theme.gravatar && theme.gravatar.email && theme.favicon.android.gravatar) { %>
>>>>>>> Stashed changes
            <link rel="icon" type="image/png" href="<%= gravatar(theme.gravatar.email, 192) %>" sizes="192x192">
          <% } else { %>
            <link rel="icon" type="image/png" href="<%= url_for(theme.favicon.android.url) %>" sizes="192x192">
          <% } %>
        <% } %>
        <% if (theme.favicon.apple) { %>
<<<<<<< Updated upstream
          <% if (theme.gravatar.email && theme.favicon.apple.gravatar) { %>
=======
          <% if (theme.gravatar && theme.gravatar.email && theme.favicon.apple.gravatar) { %>
>>>>>>> Stashed changes
            <link rel="apple-touch-icon" sizes="180x180" href="<%= gravatar(theme.gravatar.email, 180) %>">
          <% } else { %>
            <link rel="apple-touch-icon" sizes="180x180" href="<%= url_for(theme.favicon.apple.url) %>">
          <% } %>
        <% } %>
    <% } %>
    <!-- title -->
<<<<<<< Updated upstream
    <title><%= page.title ? page.title : config.title %></title>
=======
    <title><%= page_title() %></title>
>>>>>>> Stashed changes
    <!-- styles -->
    <%- css('css/style') %>
    <!-- persian styles -->
    <% if (theme.direction) { %>
      <%- css('css/rtl') %>
    <% } %>
<<<<<<< Updated upstream
=======
    <!-- dark mode-->
    <!--
    <script>
        "dark" === localStorage.getItem("dark_mode") ? document.write(
            '<link rel="stylesheet" href="https://cdn.gxuann.cn/blog-css-dark.css"></span>') : ""
    </script>
    -->
>>>>>>> Stashed changes
    <!-- rss -->
    <% if (theme.rss === '' && config.feed && config.feed.path) { %>
      <% theme.rss = config.feed.path %>
    <% } %>
    <% if (theme.rss) { %>
      <link rel="alternate" href="<%= url_for(theme.rss) %>" title="<%= config.title %>" type="application/atom+xml" />
    <% } %>
<<<<<<< Updated upstream
    
=======
>>>>>>> Stashed changes
</head>
